<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Sticker Tempel Text</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-900">
<div id="root"></div>

<script type="text/babel">
const { useState, useRef, useEffect } = React;

function MemeMaker() {
  const [image, setImage] = useState(null);
  const [topText, setTopText] = useState('');
  const [bottomText, setBottomText] = useState('');
  const canvasRef = useRef(null);

  useEffect(() => {
    if (!image) return;
    const canvas = canvasRef.current;
    const ctx = canvas.getContext('2d');

    canvas.width = image.width;
    canvas.height = image.height;
    ctx.drawImage(image, 0, 0);

    ctx.font = 'bold 48px Impact';
    ctx.textAlign = 'center';
    ctx.fillStyle = 'white';
    ctx.strokeStyle = 'black';
    ctx.lineWidth = 3;

    if (topText) {
      ctx.strokeText(topText.toUpperCase(), canvas.width/2, 60);
      ctx.fillText(topText.toUpperCase(), canvas.width/2, 60);
    }

    if (bottomText) {
      ctx.strokeText(bottomText.toUpperCase(), canvas.width/2, canvas.height - 20);
      ctx.fillText(bottomText.toUpperCase(), canvas.width/2, canvas.height - 20);
    }
  }, [image, topText, bottomText]);

  const uploadImage = e => {
    const file = e.target.files[0];
    if (!file) return;
    const img = new Image();
    img.onload = () => setImage(img);
    img.src = URL.createObjectURL(file);
  };

  const download = () => {
    const link = document.createElement('a');
    link.download = 'meme.png';
    link.href = canvasRef.current.toDataURL();
    link.click();
  };

  return (
    <div className="p-6 max-w-xl mx-auto text-white">
      <h1 className="text-3xl font-black mb-4">STICKER TEMPEL TEXT</h1>

      <input type="file" accept="image/*" onChange={uploadImage} />

      <input className="block w-full mt-3 p-2 text-black"
        placeholder="Text Atas"
        value={topText}
        onChange={e=>setTopText(e.target.value)}
      />

      <input className="block w-full mt-3 p-2 text-black"
        placeholder="Text Bawah"
        value={bottomText}
        onChange={e=>setBottomText(e.target.value)}
      />

      <div className="mt-4 bg-white p-2">
        {image && <canvas ref={canvasRef} className="max-w-full" />}
      </div>

      <button onClick={download}
        className="mt-4 bg-green-500 px-4 py-2 rounded font-bold">
        Download
      </button>
    </div>
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(<MemeMaker />);
</script>
</body>
</html>
