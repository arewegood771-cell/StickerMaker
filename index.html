<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sticker Tempel Text</title>

  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
<div id="root"></div>

<script type="text/babel">
const { useState, useRef, useEffect } = React;

const IconImage = () => (
  <svg className="w-6 h-6 inline mr-2" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24">
    <rect x="3" y="3" width="18" height="18" rx="2"/>
    <circle cx="8" cy="8" r="2"/>
    <path d="M21 15l-5-5-4 4-2-2-5 5"/>
  </svg>
);

const IconText = () => (
  <svg className="w-6 h-6 inline mr-2" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24">
    <path d="M4 7h16M9 7v10m6-10v10"/>
  </svg>
);

const IconUpload = () => (
  <svg className="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24">
    <path d="M4 17v2a2 2 0 002 2h12a2 2 0 002-2v-2"/>
    <path d="M7 9l5-5 5 5"/>
    <path d="M12 4v12"/>
  </svg>
);

const IconDownload = () => (
  <svg className="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24">
    <path d="M4 17v2a2 2 0 002 2h12a2 2 0 002-2v-2"/>
    <path d="M7 11l5 5 5-5"/>
    <path d="M12 4v12"/>
  </svg>
);

const IconTrash = () => (
  <svg className="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24">
    <path d="M3 6h18"/>
    <path d="M8 6v14h8V6"/>
    <path d="M10 10v6M14 10v6"/>
  </svg>
);

const MemeMaker = () => {
  const [image, setImage] = useState(null);
  const [topText, setTopText] = useState('');
  const [bottomText, setBottomText] = useState('');
  const [fontSize, setFontSize] = useState(48);
  const [outlineWidth, setOutlineWidth] = useState(3);
  const canvasRef = useRef(null);

  useEffect(() => {
    if (!image) return;
    const canvas = canvasRef.current;
    const ctx = canvas.getContext('2d');

    canvas.width = image.width;
    canvas.height = image.height;
    ctx.drawImage(image, 0, 0);

    ctx.font = `bold ${fontSize}px Impact`;
    ctx.fillStyle = "white";
    ctx.strokeStyle = "black";
    ctx.lineWidth = outlineWidth;
    ctx.textAlign = "center";

    if (topText) {
      ctx.strokeText(topText.toUpperCase(), canvas.width/2, 60);
      ctx.fillText(topText.toUpperCase(), canvas.width/2, 60);
    }

    if (bottomText) {
      ctx.strokeText(bottomText.toUpperCase(), canvas.width/2, canvas.height - 30);
      ctx.fillText(bottomText.toUpperCase(), canvas.width/2, canvas.height - 30);
    }
  }, [image, topText, bottomText, fontSize, outlineWidth]);

  return (
    <div className="min-h-screen p-6 bg-gradient-to-br from-gray-900 to-black text-white">
      <h1 className="text-5xl font-black text-center mb-10">
        STICKER TEMPEL TEXT
      </h1>

      <div className="grid md:grid-cols-2 gap-6 max-w-6xl mx-auto">

        <div className="space-y-4">
          <div className="bg-white text-black rounded-xl p-6">
            <h2 className="text-2xl font-bold mb-4">
              <IconImage/> Upload Gambar
            </h2>
            <input
              type="file"
              accept="image/*"
              onChange={e => {
                const file = e.target.files[0];
                if (!file) return;
                const img = new Image();
                img.onload = () => setImage(img);
                img.src = URL.createObjectURL(file);
              }}
            />
          </div>

          <div className="bg-white text-black rounded-xl p-6">
            <h2 className="text-2xl font-bold mb-4">
              <IconText/> Text
            </h2>

            <input
              className="w-full border p-2 mb-2"
              placeholder="Text Atas"
              value={topText}
              onChange={e => setTopText(e.target.value)}
            />
            <input
              className="w-full border p-2"
              placeholder="Text Bawah"
              value={bottomText}
              onChange={e => setBottomText(e.target.value)}
            />
          </div>

          <div className="bg-white text-black rounded-xl p-6 grid grid-cols-2 gap-3">
            <button
              onClick={() => {
                const a = document.createElement("a");
                a.download = "meme.png";
                a.href = canvasRef.current.toDataURL();
                a.click();
              }}
              disabled={!image}
              className="bg-green-500 text-white font-bold p-3 rounded-xl flex items-center justify-center"
            >
              <IconDownload/> Download
            </button>

            <button
              onClick={() => {
                setImage(null);
                setTopText('');
                setBottomText('');
              }}
              className="bg-red-500 text-white font-bold p-3 rounded-xl flex items-center justify-center"
            >
              <IconTrash/> Reset
            </button>
          </div>
        </div>

        <div className="bg-white rounded-xl p-4 flex items-center justify-center">
          {image ? (
            <canvas ref={canvasRef} className="max-w-full"/>
          ) : (
            <p className="text-gray-400 font-bold">Upload gambar terlebih dahulu</p>
          )}
        </div>
      </div>
    </div>
  );
};

ReactDOM.createRoot(document.getElementById("root")).render(<MemeMaker />);
</script>
</body>
</html>
